<!DOCTYPE html>
<html lang="en">
<head>
    <audio id="clickSound" src="/static/sounds/click.wav" preload="auto"></audio>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Load & Trim Input</title>
  <link rel="stylesheet" href="/static/style.css" />
  <style>
    /* ===== your original styles (unchanged) ===== */
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      max-width: 500px;
      margin: auto;
    }

    form {
      display: flex;
      flex-direction: column;
    }

    input, select, button {
      padding: 10px;
      font-size: 1rem;
      margin-bottom: 15px;
      width: 100%;
      box-sizing: border-box;
    }

    button {
      background-color: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
    }

    input[type=number]::-webkit-inner-spin-button,
    input[type=number]::-webkit-outer-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }

    input[type=number] {
      -moz-appearance: textfield;
      -webkit-appearance: none;
      appearance: none;
    }

    .golden-signature {
      text-align: center;
      margin-top: 20px;
      font-size: 0.9rem;
      color: gold;
    }

    .golden-signature span {
      font-weight: bold;
    }

    .golden-signature a {
      color: gold;
      text-decoration: none;
    }

    /* ===== universe background + meteors (added) ===== */
    .sky-bg {
      position: fixed;
      inset: 0;
      z-index: -1;              /* behind your content */
      pointer-events: none;     /* never block clicks */
      overflow: hidden;
      background: radial-gradient(ellipse at 50% 120%, #1b2735 0%, #090a0f 60%, #000 100%);
    }

    /* two subtle star layers drifting for parallax */
    .sky-stars,
    .sky-stars.layer2 {
      position: absolute;
      inset: -50% -50%;  /* larger than viewport for drift */
      opacity: 0.6;
      background-image:
        radial-gradient(2px 2px at 10% 20%, rgba(255,255,255,0.9) 50%, transparent 52%),
        radial-gradient(1px 1px at 30% 40%, rgba(255,255,255,0.7) 50%, transparent 52%),
        radial-gradient(1.5px 1.5px at 50% 10%, rgba(255,255,255,0.8) 50%, transparent 52%),
        radial-gradient(1px 1px at 70% 60%, rgba(255,255,255,0.6) 50%, transparent 52%),
        radial-gradient(2px 2px at 90% 30%, rgba(255,255,255,0.9) 50%, transparent 52%),
        radial-gradient(1px 1px at 15% 80%, rgba(255,255,255,0.7) 50%, transparent 52%),
        radial-gradient(1.5px 1.5px at 45% 70%, rgba(255,255,255,0.75) 50%, transparent 52%),
        radial-gradient(1px 1px at 85% 85%, rgba(255,255,255,0.6) 50%, transparent 52%);
      background-size: 400px 400px;
      animation: starsDrift 120s linear infinite;
    }

    .sky-stars.layer2 {
      opacity: 0.35;
      filter: blur(0.3px);
      animation-duration: 180s;
    }

    @keyframes starsDrift {
      from { transform: translate3d(0, 0, 0); }
      to   { transform: translate3d(0, -120px, 0); }
    }

    /* meteor streaks */
    .meteor {
      --x: 50%;
      --delay: 0s;
      --dur: 3.5s;

      position: fixed;
      top: -12vh;               /* start above viewport */
      left: var(--x);
      width: 2px;
      height: 16vh;
      background: linear-gradient(45deg, rgba(255,255,255,0.95), rgba(255,255,255,0));
      transform: rotate(45deg);
      filter: drop-shadow(0 0 8px rgba(255,255,255,0.9));
      opacity: 0;
      animation: meteorFall var(--dur) linear infinite;
      animation-delay: var(--delay);
      z-index: -1;              /* still behind content */
    }

    .meteor::before {
      content: "";
      position: absolute;
      top: -3px;
      left: -3px;
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #fff;
      filter: blur(2px);
    }

    @keyframes meteorFall {
      0%   { transform: translate3d(0, 0, 0) rotate(45deg); opacity: 1; }
      70%  { opacity: 1; }
      100% { transform: translate3d(-70vw, 100vh, 0) rotate(45deg); opacity: 0; }
    }

    /* DA40NG specific fields */
    .da40-fields {
      display: none;
      border-left: 3px solid #2563eb;
      padding-left: 15px;
      margin-left: 10px;
    }
  </style>
</head>
<body>
  <!-- universe background (behind everything) -->
  <div class="sky-bg" aria-hidden="true">
    <div class="sky-stars"></div>
    <div class="sky-stars layer2"></div>

    <!-- multiple meteors with varied positions, delays, and durations -->
    <span class="meteor" style="--x: 15%; --delay: 0s;   --dur: 3.8s;"></span>
    <span class="meteor" style="--x: 32%; --delay: 1.5s; --dur: 3.2s;"></span>
    <span class="meteor" style="--x: 55%; --delay: 3.2s; --dur: 3.6s;"></span>
    <span class="meteor" style="--x: 72%; --delay: 4.7s; --dur: 4.0s;"></span>
    <span class="meteor" style="--x: 88%; --delay: 6.0s; --dur: 3.4s;"></span>
    <span class="meteor" style="--x: 24%; --delay: 7.8s; --dur: 3.9s;"></span>
    <span class="meteor" style="--x: 64%; --delay: 9.5s; --dur: 3.3s;"></span>
    <span class="meteor" style="--x: 80%; --delay: 11s;  --dur: 3.7s;"></span>
  </div>

  <h2>Enter Load & Trim Details</h2>

  <form method="post">
    <label>Select Aircraft:</label>
    <select name="regn" id="regn" required onchange="toggleDA40Fields()">
      <option value="" disabled selected>-- Select Aircraft --</option>
      <option value="IAU">VT-IAU</option>
      <option value="NNN">VT-NNN</option>
      <option value="PSS">VT-PSS</option>
      <option value="PFA">VT-PFA</option>
      <option value="AGH">VT-AGH</option>
      <option value="PM">VT-PMA</option>
      <option value="PRH">VT-PRH</option>
      <option value="PFB">VT-PFB</option>
    </select>

    <label>Pilot Weight:</label>
    <input type="text" name="pilot_weight_lbs" id="pilot_weight_lbs" placeholder="lbs" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertPilotToKg()">
    <input type="text" id="pilot_weight_kg" placeholder="kg" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertPilotToLbs()">

    <label>Co-Pilot / Pax Weight:</label>
    <input type="text" name="pax_weight_lbs" id="pax_weight_lbs" placeholder="lbs" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertPaxToKg()">
    <input type="text" id="pax_weight_kg" placeholder="kg" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertPaxToLbs()">

    <!-- DA40NG Specific Fields -->
    <div id="da40-fields" class="da40-fields">
      <label>Rear Seat Pax 1 Weight:</label>
      <input type="text" name="pax1_weight_lbs" id="pax1_weight_lbs" placeholder="lbs" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertPax1ToKg()">
      <input type="text" id="pax1_weight_kg" placeholder="kg" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertPax1ToLbs()">

      <label>Rear Seat Pax 2 Weight:</label>
      <input type="text" name="pax2_weight_lbs" id="pax2_weight_lbs" placeholder="lbs" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertPax2ToKg()">
      <input type="text" id="pax2_weight_kg" placeholder="kg" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertPax2ToLbs()">

      <label>Baggage Forward Weight:</label>
      <input type="text" name="baggage_fwd_lbs" id="baggage_fwd_lbs" placeholder="lbs" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertBaggageFwdToKg()">
      <input type="text" id="baggage_fwd_kg" placeholder="kg" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertBaggageFwdToLbs()">

      <label>Baggage Aft Weight:</label>
      <input type="text" name="baggage_aft_lbs" id="baggage_aft_lbs" placeholder="lbs" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertBaggageAftToKg()">
      <input type="text" id="baggage_aft_kg" placeholder="kg" inputmode="decimal" pattern="^\d+(\.\d{1,2})?$" oninput="convertBaggageAftToLbs()">
    </div>

    <label>Left Tank Fuel (litres):</label>
    <input type="number" name="fuel_left" required>

    <label>Right Tank Fuel (litres):</label>
    <input type="number" name="fuel_right" required>

    <button type="button" onclick="validateAndShowDisclaimer()">Generate Trim Sheet</button>
  </form>

  <div class="golden-signature">
    Built by <span>Pranav Sawarkar</span> | 
    <a href="https://instagram.com/pranav_4007" target="_blank">@pranav_4007</a>
  </div>

  <script>
    function toggleDA40Fields() {
      const regn = document.getElementById('regn').value;
      const da40Fields = document.getElementById('da40-fields');
      
      if (regn === 'PM' || regn === 'PRH') {
        da40Fields.style.display = 'block';
      } else {
        da40Fields.style.display = 'none';
      }
    }

    function convertPilotToKg() {
      let lbs = parseFloat(document.getElementById("pilot_weight_lbs").value);
      document.getElementById("pilot_weight_kg").value = !isNaN(lbs) ? (lbs / 2.2).toFixed(2) : '';
    }

    function convertPilotToLbs() {
      let kg = parseFloat(document.getElementById("pilot_weight_kg").value);
      document.getElementById("pilot_weight_lbs").value = !isNaN(kg) ? (kg * 2.2).toFixed(2) : '';
    }

    function convertPaxToKg() {
      let lbs = parseFloat(document.getElementById("pax_weight_lbs").value);
      document.getElementById("pax_weight_kg").value = !isNaN(lbs) ? (lbs / 2.2).toFixed(2) : '';
    }

    function convertPaxToLbs() {
      let kg = parseFloat(document.getElementById("pax_weight_kg").value);
      document.getElementById("pax_weight_lbs").value = !isNaN(kg) ? (kg * 2.2).toFixed(2) : '';
    }

    // DA40NG specific conversion functions
    function convertPax1ToKg() {
      let lbs = parseFloat(document.getElementById("pax1_weight_lbs").value);
      document.getElementById("pax1_weight_kg").value = !isNaN(lbs) ? (lbs / 2.2).toFixed(2) : '';
    }

    function convertPax1ToLbs() {
      let kg = parseFloat(document.getElementById("pax1_weight_kg").value);
      document.getElementById("pax1_weight_lbs").value = !isNaN(kg) ? (kg * 2.2).toFixed(2) : '';
    }

    function convertPax2ToKg() {
      let lbs = parseFloat(document.getElementById("pax2_weight_lbs").value);
      document.getElementById("pax2_weight_kg").value = !isNaN(lbs) ? (lbs / 2.2).toFixed(2) : '';
    }

    function convertPax2ToLbs() {
      let kg = parseFloat(document.getElementById("pax2_weight_kg").value);
      document.getElementById("pax2_weight_lbs").value = !isNaN(kg) ? (kg * 2.2).toFixed(2) : '';
    }

    function convertBaggageFwdToKg() {
      let lbs = parseFloat(document.getElementById("baggage_fwd_lbs").value);
      document.getElementById("baggage_fwd_kg").value = !isNaN(lbs) ? (lbs / 2.2).toFixed(2) : '';
    }

    function convertBaggageFwdToLbs() {
      let kg = parseFloat(document.getElementById("baggage_fwd_kg").value);
      document.getElementById("baggage_fwd_lbs").value = !isNaN(kg) ? (kg * 2.2).toFixed(2) : '';
    }

    function convertBaggageAftToKg() {
      let lbs = parseFloat(document.getElementById("baggage_aft_lbs").value);
      document.getElementById("baggage_aft_kg").value = !isNaN(lbs) ? (lbs / 2.2).toFixed(2) : '';
    }

    function convertBaggageAftToLbs() {
      let kg = parseFloat(document.getElementById("baggage_aft_kg").value);
      document.getElementById("baggage_aft_lbs").value = !isNaN(kg) ? (kg * 2.2).toFixed(2) : '';
    }
  </script>

  <script>
function showDisclaimer() {
  const message = `⚠️ DISCLAIMER

This Load and Trim tool is shared here purely for educational and reference purposes.

While we've taken care to ensure the accuracy of all calculations, it's important that users double-check every calculations manually before using it in any real-world scenario. This tool is not intended for official, operational, or training use.

The developer shall not be held responsible for any errors, omissions, or outcomes resulting from its use.

☑️ By proceeding, you acknowledge and accept these terms.`;
    if (confirm(message)) {
        document.querySelector('form').submit();
    } else {
        alert("Submission cancelled.");
    }
}
</script>

<script>
function validateAndShowDisclaimer() {
    const form = document.querySelector("form");

    // Check all required inputs are filled
    const requiredFields = form.querySelectorAll("[required]");
    let allFilled = true;

    requiredFields.forEach(field => {
        if (!field.value.trim()) {
            allFilled = false;
        }
    });

    if (!allFilled) {
        alert("Please fill in all required fields.");
        return;
    }

    // Now show disclaimer
 const message = `⚠️ DISCLAIMER

This Load and Trim tool is shared here purely for educational and reference purposes.

While we've taken care to ensure the accuracy of all calculations, it's important that users double-check every calculations manually before using it in any real-world scenario. This tool is not intended for official, operational, or training use.

The developer shall not be held responsible for any errors, omissions, or outcomes resulting from its use.

☑️ By proceeding, you acknowledge and accept these terms.`;

    if (confirm(message)) {
        form.submit();
    } else {
        alert("Submission cancelled.");
    }
}
</script>

<script>
// Play sound
function playClickSound() {
    const sound = document.getElementById("clickSound");
    if (sound) {
        sound.currentTime = 0;
        sound.play();
    }
}

// Enhance all buttons with sound
document.addEventListener("DOMContentLoaded", function () {
    const buttons = document.querySelectorAll("button, a");

    buttons.forEach(btn => {
        btn.addEventListener("click", playClickSound);
    });
});
</script>

</body>
</html>
